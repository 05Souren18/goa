{"$schema":"http://json-schema.org/draft-04/hyper-schema","id":"http://localhost/schema","title":"The virtual wine cellar","type":"object","properties":{"account":{"$ref":"#/definitions/account"},"bottle":{"$ref":"#/definitions/bottle"},"bottle_collection":{"$ref":"#/definitions/bottle_collection"},"create_account_payload":{"$ref":"#/definitions/create_account_payload"},"create_bottle_payload":{"$ref":"#/definitions/create_bottle_payload"},"rate_bottle_payload":{"$ref":"#/definitions/rate_bottle_payload"},"update_account_payload":{"$ref":"#/definitions/update_account_payload"},"update_bottle_payload":{"$ref":"#/definitions/update_bottle_payload"}},"definitions":{"account":{"title":"account","type":"object","properties":{"created_at":{"type":"string","description":"Date of creation","format":"date-time"},"created_by":{"type":"string","description":"Email of account ownder","format":"email"},"href":{"type":"string","description":"API href of account"},"id":{"type":"integer","description":"ID of account"},"name":{"type":"string","description":"Name of account"}},"description":"A tenant account","media":{"type":"application/vnd.goa.example.account"},"links":[{"title":"show","rel":"self","href":"/cellar/accounts/{accountID}","method":"GET","targetSchema":{"$ref":"#/definitions/account"},"mediaType":"application/vnd.goa.example.account"},{"title":"create","rel":"create","href":"/cellar/accounts","method":"POST","schema":{"description":"create payload","$ref":"#/definitions/create_account_payload"}},{"title":"update","rel":"update","href":"/cellar/accounts/{accountID}","method":"PUT","schema":{"description":"update payload","$ref":"#/definitions/update_account_payload"}},{"title":"delete","rel":"delete","href":"/cellar/accounts/{accountID}","method":"DELETE"}],"required":["name"]},"bottle":{"title":"bottle","type":"object","properties":{"account":{"description":"Account that owns bottle","$ref":"#/definitions/account"},"characteristics":{"type":"string","minLength":10,"maxLength":300},"color":{"type":"string","enum":["red","white","rose","yellow","sparkling"]},"country":{"type":"string","minLength":2},"created_at":{"type":"string","description":"Date of creation","format":"date-time"},"href":{"type":"string","description":"API href of bottle"},"id":{"type":"integer","description":"ID of bottle"},"name":{"type":"string","minLength":2},"rating":{"type":"integer","description":"Rating of bottle between 1 and 5","minimum":1,"maximum":5},"region":{"type":"string"},"review":{"type":"string","minLength":10,"maxLength":300},"sweetness":{"type":"integer","minimum":1,"maximum":5},"updated_at":{"type":"string","description":"Date of last update","format":"date-time"},"varietal":{"type":"string","minLength":4},"vineyard":{"type":"string","minLength":2},"vintage":{"type":"integer","minimum":1900,"maximum":2020}},"description":"A bottle of wine","media":{"type":"application/vnd.goa.example.bottle"},"links":[{"title":"account","description":"Account that owns bottle","rel":"account","href":"/cellar/accounts/{accountID}","method":"GET","targetSchema":{"$ref":"#/definitions/account"},"mediaType":"application/vnd.goa.example.account"},{"title":"rate","rel":"rate","href":"/cellar/accounts/{accountID}/bottles/{bottleID}/actions/rate","method":"PUT","schema":{"description":"rate payload","$ref":"#/definitions/rate_bottle_payload"}},{"title":"delete","rel":"delete","href":"/cellar/accounts/{accountID}/bottles/{bottleID}","method":"DELETE"},{"title":"list","rel":"list","href":"/cellar/accounts/{accountID}/bottles","method":"GET","targetSchema":{"$ref":"#/definitions/bottle_collection"},"mediaType":"application/vnd.goa.example.bottle; type=collection"},{"title":"show","rel":"self","href":"/cellar/accounts/{accountID}/bottles/{bottleID}","method":"GET","targetSchema":{"$ref":"#/definitions/bottle"},"mediaType":"application/vnd.goa.example.bottle"},{"title":"create","rel":"create","href":"/cellar/accounts/{accountID}/bottles","method":"POST","schema":{"description":"create payload","$ref":"#/definitions/create_bottle_payload"}},{"title":"update","rel":"update","href":"/cellar/accounts/{accountID}/bottles/{bottleID}","method":"PATCH","schema":{"description":"update payload","$ref":"#/definitions/update_bottle_payload"}}],"required":["account","name","vineyard"]},"bottle_collection":{"title":"BottleCollection","type":"array","item":{"$ref":"#/definitions/bottle"},"media":{"type":"application/vnd.goa.example.bottle; type=collection"}},"create_account_payload":{"title":"CreateAccountPayload","type":"object","properties":{"name":{"type":"string","description":"Name of account"}},"required":["name"]},"create_bottle_payload":{"title":"CreateBottlePayload","type":"object","properties":{"characteristics":{"type":"string","minLength":10,"maxLength":300},"color":{"type":"string","enum":["red","white","rose","yellow","sparkling"]},"country":{"type":"string","minLength":2},"name":{"type":"string","minLength":2},"region":{"type":"string"},"review":{"type":"string","minLength":10,"maxLength":300},"sweetness":{"type":"integer","minimum":1,"maximum":5},"varietal":{"type":"string","minLength":4},"vineyard":{"type":"string","minLength":2},"vintage":{"type":"integer","minimum":1900,"maximum":2020}},"required":["name","vineyard","varietal","vintage","color"]},"rate_bottle_payload":{"title":"RateBottlePayload","type":"object","properties":{"rating":{"type":"integer","description":"Rating of bottle between 1 and 5","minimum":1,"maximum":5}},"required":["rating"]},"update_account_payload":{"title":"UpdateAccountPayload","type":"object","properties":{"name":{"type":"string","description":"Name of account"}},"required":["name"]},"update_bottle_payload":{"title":"UpdateBottlePayload","type":"object","properties":{"characteristics":{"type":"string","minLength":10,"maxLength":300},"color":{"type":"string","enum":["red","white","rose","yellow","sparkling"]},"country":{"type":"string","minLength":2},"name":{"type":"string","minLength":2},"region":{"type":"string"},"review":{"type":"string","minLength":10,"maxLength":300},"sweetness":{"type":"integer","minimum":1,"maximum":5},"varietal":{"type":"string","minLength":4},"vineyard":{"type":"string","minLength":2},"vintage":{"type":"integer","minimum":1900,"maximum":2020}},"required":["name","vineyard","varietal","vintage","color"]}},"description":"A basic example of a CRUD API implemented with goa","links":[{"rel":"self","href":"http://localhost"},{"rel":"self","href":"/schema","method":"GET","targetSchema":{"$schema":"http://json-schema.org/draft-04/hyper-schema","additionalProperties":true}}]}