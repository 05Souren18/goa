//************************************************************************//
// cellar JSON Hyper-schema
//
// Generated with goagen v0.0.1, command line:
// $ goagen
// --out=/home/raphael/go/src/github.com/raphael/goa/examples/cellar
// --design=github.com/raphael/goa/examples/cellar/design
// --url=http://localhost
//
// The content of this file is auto-generated, DO NOT MODIFY
//************************************************************************//

package schema

import (
	"net/http"

	"github.com/julienschmidt/httprouter"
	"github.com/raphael/goa"
)

// MountController mounts the API JSON schema controller under "/schema".
func MountController(app *goa.Application) {
	logger := app.Logger.New("ctrl", "Schema")
	logger.Info("mounting")
	app.Router.GET("/schema.json", getSchema)
	logger.Info("handler", "action", "Show", "route", "GET /schema.json")
	logger.Info("mounted")
}

// getSchema is the httprouter handle that returns the API JSON schema.
func getSchema(w http.ResponseWriter, r *http.Request, p httprouter.Params) {
	w.Header().Set("Content-Type", "application/schema+json")
	w.Header().Set("Cache-Control", "public, max-age=3600")
	w.WriteHeader(200)
	w.Write([]byte(schema))
}

// Generated schema
const schema = `{"$schema":"http://json-schema.org/draft-04/hyper-schema","id":"http://localhost/schema","title":"The virtual wine cellar","type":"object","properties":{"Account":{"$ref":"#/definitions/Account"},"Bottle":{"$ref":"#/definitions/Bottle"},"BottleCollection":{"$ref":"#/definitions/BottleCollection"},"CreateAccountPayload":{"$ref":"#/definitions/CreateAccountPayload"},"CreateBottlePayload":{"$ref":"#/definitions/CreateBottlePayload"},"RateBottlePayload":{"$ref":"#/definitions/RateBottlePayload"},"UpdateAccountPayload":{"$ref":"#/definitions/UpdateAccountPayload"},"UpdateBottlePayload":{"$ref":"#/definitions/UpdateBottlePayload"},"account":{"$ref":"#/definitions/account"},"bottle":{"$ref":"#/definitions/bottle"}},"definitions":{"Account":{"title":"Mediatype identifier: application/vnd.goa.example.account","type":"object","properties":{"created_at":{"type":"string","description":"Date of creation","format":"date-time"},"created_by":{"type":"string","description":"Email of account ownder","format":"email"},"href":{"type":"string","description":"API href of account"},"id":{"type":"integer","description":"ID of account"},"name":{"type":"string","description":"Name of account"}},"description":"A tenant account","media":{"type":"application/vnd.goa.example.account"},"required":["name"]},"Bottle":{"title":"Mediatype identifier: application/vnd.goa.example.bottle","type":"object","properties":{"account":{"description":"Account that owns bottle","$ref":"#/definitions/Account"},"characteristics":{"type":"string","minLength":10,"maxLength":300},"color":{"type":"string","enum":["red","white","rose","yellow","sparkling"]},"country":{"type":"string","minLength":2},"created_at":{"type":"string","description":"Date of creation","format":"date-time"},"href":{"type":"string","description":"API href of bottle"},"id":{"type":"integer","description":"ID of bottle"},"name":{"type":"string","minLength":2},"rating":{"type":"integer","description":"Rating of bottle between 1 and 5","minimum":1,"maximum":5},"region":{"type":"string"},"review":{"type":"string","minLength":10,"maxLength":300},"sweetness":{"type":"integer","minimum":1,"maximum":5},"updated_at":{"type":"string","description":"Date of last update","format":"date-time"},"varietal":{"type":"string","minLength":4},"vineyard":{"type":"string","minLength":2},"vintage":{"type":"integer","minimum":1900,"maximum":2020}},"description":"A bottle of wine","media":{"type":"application/vnd.goa.example.bottle"},"links":[{"title":"account","description":"Account that owns bottle","rel":"account","href":"/cellar/accounts/{accountID}","method":"GET","targetSchema":{"$ref":"#/definitions/Account"},"mediaType":"application/vnd.goa.example.account"}],"required":["account","name","vineyard"]},"BottleCollection":{"title":"Mediatype identifier: application/vnd.goa.example.bottle; type=collection","type":"array","item":{"$ref":"#/definitions/Bottle"},"media":{"type":"application/vnd.goa.example.bottle; type=collection"}},"CreateAccountPayload":{"title":"CreateAccountPayload","type":"object","properties":{"name":{"type":"string","description":"Name of account"}},"required":["name"]},"CreateBottlePayload":{"title":"CreateBottlePayload","type":"object","properties":{"characteristics":{"type":"string","minLength":10,"maxLength":300},"color":{"type":"string","enum":["red","white","rose","yellow","sparkling"]},"country":{"type":"string","minLength":2},"name":{"type":"string","minLength":2},"region":{"type":"string"},"review":{"type":"string","minLength":10,"maxLength":300},"sweetness":{"type":"integer","minimum":1,"maximum":5},"varietal":{"type":"string","minLength":4},"vineyard":{"type":"string","minLength":2},"vintage":{"type":"integer","minimum":1900,"maximum":2020}},"required":["name","vineyard","varietal","vintage","color"]},"RateBottlePayload":{"title":"RateBottlePayload","type":"object","properties":{"rating":{"type":"integer","description":"Rating of bottle between 1 and 5","minimum":1,"maximum":5}},"required":["rating"]},"UpdateAccountPayload":{"title":"UpdateAccountPayload","type":"object","properties":{"name":{"type":"string","description":"Name of account"}},"required":["name"]},"UpdateBottlePayload":{"title":"UpdateBottlePayload","type":"object","properties":{"characteristics":{"type":"string","minLength":10,"maxLength":300},"color":{"type":"string","enum":["red","white","rose","yellow","sparkling"]},"country":{"type":"string","minLength":2},"name":{"type":"string","minLength":2},"region":{"type":"string"},"review":{"type":"string","minLength":10,"maxLength":300},"sweetness":{"type":"integer","minimum":1,"maximum":5},"varietal":{"type":"string","minLength":4},"vineyard":{"type":"string","minLength":2},"vintage":{"type":"integer","minimum":1900,"maximum":2020}}},"account":{"title":"account","type":"object","properties":{"created_at":{"type":"string","description":"Date of creation","format":"date-time"},"created_by":{"type":"string","description":"Email of account ownder","format":"email"},"href":{"type":"string","description":"API href of account"},"id":{"type":"integer","description":"ID of account"},"name":{"type":"string","description":"Name of account"}},"description":"A tenant account","media":{"type":"application/vnd.goa.example.account"},"links":[{"title":"create","rel":"create","href":"/cellar/accounts","method":"POST","schema":{"description":"create payload","$ref":"#/definitions/CreateAccountPayload"}},{"title":"update","rel":"update","href":"/cellar/accounts/{accountID}","method":"PUT","schema":{"description":"update payload","$ref":"#/definitions/UpdateAccountPayload"}},{"title":"delete","rel":"delete","href":"/cellar/accounts/{accountID}","method":"DELETE"},{"title":"show","rel":"self","href":"/cellar/accounts/{accountID}","method":"GET","targetSchema":{"$ref":"#/definitions/Account"},"mediaType":"application/vnd.goa.example.account"}],"required":["name"]},"bottle":{"title":"bottle","type":"object","properties":{"account":{"description":"Account that owns bottle","$ref":"#/definitions/Account"},"characteristics":{"type":"string","minLength":10,"maxLength":300},"color":{"type":"string","enum":["red","white","rose","yellow","sparkling"]},"country":{"type":"string","minLength":2},"created_at":{"type":"string","description":"Date of creation","format":"date-time"},"href":{"type":"string","description":"API href of bottle"},"id":{"type":"integer","description":"ID of bottle"},"name":{"type":"string","minLength":2},"rating":{"type":"integer","description":"Rating of bottle between 1 and 5","minimum":1,"maximum":5},"region":{"type":"string"},"review":{"type":"string","minLength":10,"maxLength":300},"sweetness":{"type":"integer","minimum":1,"maximum":5},"updated_at":{"type":"string","description":"Date of last update","format":"date-time"},"varietal":{"type":"string","minLength":4},"vineyard":{"type":"string","minLength":2},"vintage":{"type":"integer","minimum":1900,"maximum":2020}},"description":"A bottle of wine","media":{"type":"application/vnd.goa.example.bottle"},"links":[{"title":"account","description":"Account that owns bottle","rel":"account","href":"/cellar/accounts/{accountID}","method":"GET","targetSchema":{"$ref":"#/definitions/Account"},"mediaType":"application/vnd.goa.example.account"},{"title":"list","rel":"list","href":"/cellar/accounts/{accountID}/bottles","method":"GET","targetSchema":{"$ref":"#/definitions/BottleCollection"},"mediaType":"application/vnd.goa.example.bottle; type=collection"},{"title":"show","rel":"self","href":"/cellar/accounts/{accountID}/bottles/{bottleID}","method":"GET","targetSchema":{"$ref":"#/definitions/Bottle"},"mediaType":"application/vnd.goa.example.bottle"},{"title":"create","rel":"create","href":"/cellar/accounts/{accountID}/bottles","method":"POST","schema":{"description":"create payload","$ref":"#/definitions/CreateBottlePayload"}},{"title":"update","rel":"update","href":"/cellar/accounts/{accountID}/bottles/{bottleID}","method":"PATCH","schema":{"description":"update payload","$ref":"#/definitions/UpdateBottlePayload"}},{"title":"rate","rel":"rate","href":"/cellar/accounts/{accountID}/bottles/{bottleID}/actions/rate","method":"PUT","schema":{"description":"rate payload","$ref":"#/definitions/RateBottlePayload"}},{"title":"delete","rel":"delete","href":"/cellar/accounts/{accountID}/bottles/{bottleID}","method":"DELETE"}],"required":["account","name","vineyard"]}},"description":"A basic example of a CRUD API implemented with goa","links":[{"rel":"self","href":"http://localhost"},{"rel":"self","href":"/schema","method":"GET","targetSchema":{"$schema":"http://json-schema.org/draft-04/hyper-schema","additionalProperties":true}}]}`
